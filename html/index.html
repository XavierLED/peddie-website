<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Byte Bites</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Caveat" rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    </head>
      <div class="app-header">
    <div class="loader-container">
    <div class="pizza">
<img src="/img/pizza1.png"/>
</div>
</div>
        <!--adds each of the button for the header buttons and allows them to communicate with the back end if that makes sense-->

        <form method="POST" action="{{ url_for('index') }}" class="header-form">

          <div class="header-item">
            <input type="text" name="number_people" placeholder="Number of people">
            <input type="submit" name="button_number" value="Enter">
          </div>

          <div class="header-item">
            <input type="text" name="ingredients" placeholder="Ingredients">
            <input type="submit" name="button_ingredient" value="Enter">
          </div>

          <div class="header-item">
            <input type="text" name="mod" placeholder="Modifications">
            <input type="submit" name="button_mods" value="Enter">
          </div>

          <div class="header-item">
            <input type="submit" name="button_generate" value="Generate Recipe">
          </div>

        </form>
      </div>

    <!--checks to see if each of the 3 inputs are empty and if they arent empty then it prints them in a list format-->
    <div class="results">
      <div>
        {% if number %}
          <p><strong>People:</strong> {{ number }}</p>
        {% endif %}
      </div>

      <div>
        {% if mylist %}
          <strong>Ingredients:</strong>
          <ul>
                    <!-- Using jinga we are able to utilize python code within the html itself, so we create a for loop which splits the string into a list
                         then lists each element in an html list -->

            {% for item in mylist[0].split(",") %}
              <li>{{ item }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

      <div>
        {% if mods %}
          <strong>Modifications:</strong>
          <ul>
            {% for item in mods[0].split(",") %}
              <li>{{ item }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>
    </div>
    
    <!-- creates a recipe card for each of the four dishes that the AI generates in a list like format -->
    <div class="recipes-grid">
      {% for dish in response %}
        <form method="POST" action="{{ url_for('index') }}">
          <!-- one clickable card -->
          <!-- Using jinga we loop through each dish and print dish name as a header and print each element of the ingredients as a list -->
            <!-- we make this all a button so that it is click able and send the information to the backend -->
          <button type="submit" name="this_dish" value="{{ loop.index0 }}" class="recipe-card">
            <h3 class="recipe-title">{{ dish.dish_name }}</h3>
            <ul class="recipe-ings">
              {% for ing in dish.valid_ingredients %}
                <li>{{ ing }}</li>
              {% endfor %}
            </ul>
          </button>
        </form>
      {% endfor %}
      </div>
        
    
    <!-- its a big container containing all the other peices of the recipe card inside of it, such as the lines, dots, and words -->
    <section id="recipe-card" class="card" role="document" aria-label="Recipe card">
    <h1 class="title">RECIPE</h1>

    <div class="meta">
    <!-- Holding the name and the number of people this serves in the recipe header -->

      <div class="field">
        <span class="label">Title</span>
        <span class="dots">
        {%if recipe != ""%}
        <span class="value">{{ recipe[0].dish }}</span>
        {%endif%}
        </span>
      </div>

      <div class="field">
        <span class="label">Serves</span>
        <span class="dots">
        <span class="value">{{ number }}</span>
        </span>
      </div>
    </div>


    <div class="ingredients-header" aria-hidden="true">
      <div class="leader"></div>
      <div>Ingredients</div>
      <div class="leader"></div>
    </div>

        <!-- this contains two classes of columns to make both of the ingredients and instructions be displayed in a list format-->

    <div class="ruled">
      <div class="column">
      <ul>
                    <!-- using the flask feature jinga we are able to create a for loop which goes through each list element and lists the element, 
                         the same thing for the next for loop below -->
        {%if recipe!= ""%}
      {% for ing in (recipe[0].valid_ingredients or []) %}
      <li>{{ ing }}</li>
      {% endfor %}
      {%endif%}
      </ul>
      </div>

      <div class="column">
      <ul>
        {%if recipe!= ""%}
      {% for steps in (recipe[0].recipe or []) %}
      <li>{{ steps }}</li>
      {% endfor %}
      {%endif%}
      </ul>
      </div>
      </div>
  </section>

  <button id="downloadCard">Print Recipe</button>
  </body>
</html>
  <script>
  document.getElementById('downloadCard').addEventListener('click', () => {
    window.print();
  });
  </script> 
